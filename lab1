import time
from itertools import permutations

# Рекурсивная генерация всех уникальных назначений
def generate_assignments_algo(k, n):
    result = []
    used = [False] * k

    def backtrack(assignment, obj_idx):
        if obj_idx == n:
            result.append(assignment[:])
            return
        for i in range(k):
            if not used[i]:
                used[i] = True
                assignment.append(i + 1)
                backtrack(assignment, obj_idx + 1)
                assignment.pop()
                used[i] = False

    backtrack([], 0)
    return result

# Генерация через itertools.permutations
def generate_assignments_itertools(k, n):
    fighters = list(range(1, k + 1))
    return list(permutations(fighters, n))

# Основная функция
def part1(K, N):
    print("=== Часть 1: Генерация всех возможных назначений ===\n")

    if K < N:
        print("Ошибка: количество бойцов должно быть не меньше количества объектов.")
        return
    if K <= 0 or N <= 0:
        print("Ошибка: K и N должны быть положительными.")
        return

    # Алгоритмический подход
    start_time = time.time()
    assignments_algo = generate_assignments_algo(K, N)
    algo_time = time.time() - start_time
    print(f"Алгоритмический подход: найдено {len(assignments_algo)} вариантов")
    print(f"Время выполнения: {algo_time:.6f} секунд")
    print("Все варианты:")
    for perm in assignments_algo:
        print(perm)

    print("\n" + "="*60 + "\n")

    # Подход с itertools
    start_time = time.time()
    assignments_itertools = generate_assignments_itertools(K, N)
    itertools_time = time.time() - start_time
    print(f"Подход с itertools: найдено {len(assignments_itertools)} вариантов")
    print(f"Время выполнения: {itertools_time:.6f} секунд")
    print("Все варианты:")
    for perm in assignments_itertools:
        print(perm)

    # Сравнение времени
    diff = algo_time - itertools_time
    comparison = "быстрее" if diff > 0 else "медленнее"
    print(f"\nСравнение: itertools {comparison} на {abs(diff):.6f} секунд")

# Пример запуска
K = 5
N = 3
part1(K, N)
